@using Application.Services;
@{
    Layout = "_AgencySideLayout";


    var agency = (Agency)ViewBag.agency;

    var agancy_balance = (long)ViewBag.agancy_balance;

    var today_soldTickets = (List<Ticket>)ViewBag.today_soldTickets;

    ViewData["isFront"] = false;

    ViewData["navbarType"] = "layout-navbar-fixed";
}
@section VendorStyles {
    <link rel="stylesheet" href="~/vendor/libs/apex-charts/apex-charts.css" />
    <link rel="stylesheet" href="~/vendor/libs/swiper/swiper.css" />
    <link rel="stylesheet" href="~/vendor/libs/datatables-bs5/datatables.bootstrap5.css">
    <link rel="stylesheet" href="~/vendor/libs/datatables-responsive-bs5/responsive.bootstrap5.css">
    <link rel="stylesheet" href="~/vendor/libs/datatables-checkboxes-jquery/datatables.checkboxes.css">

    <link rel="stylesheet" href="~/vendor/libs/sweetalert2/sweetalert2.css" />
    <link rel="stylesheet" href="~/vendor/libs/animate-css/animate.css" />
}

@section VendorScripts {
    <script src="~/vendor/libs/apex-charts/apexcharts.js"></script>
    <script src="~/vendor/libs/swiper/swiper.js"></script>
    <script src="~/vendor/libs/datatables-bs5/datatables-bootstrap5.js"></script>
    <script src="~/vendor/libs/datatables-bs5/i18n/fa.js"></script>

    <script src="~/vendor/libs/bootstrap-select/bootstrap-select.js"></script>
    <script src="~/vendor/libs/&#64;form-validation/umd/bundle/popular.min.js"></script>
    <script src="~/vendor/libs/&#64;form-validation/umd/plugin-bootstrap5/index.min.js"></script>
    <script src="~/vendor/libs/&#64;form-validation/umd/plugin-auto-focus/index.min.js"></script>

     <script src="~/vendor/libs/sweetalert2/sweetalert2.js"></script>

    <script src="/libs/jquery.js"></script>
}

@section PageStyles {
    <link rel="stylesheet" href="~/vendor/css/pages/cards-advance.css" />
}

@section PageScripts {
    <script src="~/js/dashboards-analytics.js"></script>
    
}

<style>
    .rounded-5 {
        border-radius: 1.5rem !important;
    }

    .rounded-6 {
        border-radius: 2.1rem !important;
    }

    .topbar {
    }
</style>

<div class="row">
    <div class="col-lg-6 mb-4 ">

        <div class="swiper-container card swiper-container-horizontal swiper swiper-card-advance-bg mt-1 rounded-5" id="swiper-with-pagination-cards">
            <div class="swiper-wrapper">
                <div class="swiper-slide">
                    <div class="row">
                        <div class="col-12 topbar">
                            <h4 class="text-white mb-1 mt-0">تعداد سفرهای فروخته‌شده</h4>
                            <label>
                                باهم تاکنون
                                <strong>
                                    @ViewBag.totalsold
                                </strong>
                                بلیط فروختیم
                            </label>
                        </div>
                        <div class="row m-0">
                            <div class="col-lg-7 col-md-9 col-12 order-2 order-md-1">
                                <h6 class="text-white mt-0 mt-md-3 mb-3">آمار کلی</h6>
                                <div class="row">
                                    <div class="col-6">
                                        <ul class="list-unstyled mb-0">
                                            <li class="d-flex mb-4 align-items-center">
                                                <p class="mb-0 fw-medium me-2 website-analytics-text-bg">@ViewBag.todaysold</p>
                                                <p class="mb-0">فروش امروز</p>
                                            </li>
                                            <li class="d-flex align-items-center mb-2">
                                                <p class="mb-0 fw-medium me-2 website-analytics-text-bg">@ViewBag._7dayssold</p>
                                                <p class="mb-0">این هفته</p>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="col-6">
                                        <ul class="list-unstyled mb-0">
                                            <li class="d-flex mb-4 align-items-center">
                                                <p class="mb-0 fw-medium me-2 website-analytics-text-bg">@ViewBag.thismonthsold</p>
                                                <p class="mb-0">ماه جاری</p>
                                            </li>
                                            <li class="d-flex align-items-center mb-2">
                                                <p class="mb-0 fw-medium me-2 website-analytics-text-bg">@ViewBag.totalsold</p>
                                                <p class="mb-0">تمامی سفرها</p>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-5 col-md-3 col-12 order-1 order-md-2 my-4 my-md-0 text-center">
                                <img src="~/taxi.png"
                                     width="170"
                                     class="card-website-analytics-img image" />
                            </div>
                        </div>
                    </div>
                </div>
                @*                 <div class="swiper-slide">
                <div class="row">
                <div class="col-12">
                <h5 class="text-white mb-1 mt-2">تجزیه و تحلیل وب سایت</h5>
                <small>مجموع 28.5% نرخ تبدیل</small>
                </div>
                <div class="col-lg-7 col-md-9 col-12 order-2 order-md-1">
                <h6 class="text-white mt-0 mt-md-3 mb-3">خرج کردن</h6>
                <div class="row">
                <div class="col-6">
                <ul class="list-unstyled mb-0">
                <li class="d-flex mb-4 align-items-center">
                <p class="mb-0 fw-medium me-2 website-analytics-text-bg">۱۲ساعت</p>
                <p class="mb-0">خرج کردن</p>
                </li>
                <li class="d-flex align-items-center mb-2">
                <p class="mb-0 fw-medium me-2 website-analytics-text-bg">127</p>
                <p class="mb-0">سفارش</p>
                </li>
                </ul>
                </div>
                <div class="col-6">
                <ul class="list-unstyled mb-0">
                <li class="d-flex mb-4 align-items-center">
                <p class="mb-0 fw-medium me-2 website-analytics-text-bg">18</p>
                <p class="mb-0">اندازه سفارش</p>
                </li>
                <li class="d-flex align-items-center mb-2">
                <p class="mb-0 fw-medium me-2 website-analytics-text-bg">2.3K</p>
                <p class="mb-0">اقلام</p>
                </li>
                </ul>
                </div>
                </div>
                </div>
                <div class="col-lg-5 col-md-3 col-12 order-1 order-md-2 my-4 my-md-0 text-center">
                <img src="~/img/illustrations/card-website-analytics-2.png"
                alt="تجزیه و تحلیل وب سایت"
                width="170"
                class="card-website-analytics-img" />
                </div>
                </div>
                </div>
                <div class="swiper-slide">
                <div class="row">
                <div class="col-12">
                <h5 class="text-white mb-1 mt-2">تجزیه و تحلیل وب سایت</h5>
                <small>مجموع 28.5% نرخ تبدیل</small>
                </div>
                <div class="col-lg-7 col-md-9 col-12 order-2 order-md-1">
                <h6 class="text-white mt-0 mt-md-3 mb-3">منابع درآمد</h6>
                <div class="row">
                <div class="col-6">
                <ul class="list-unstyled mb-0">
                <li class="d-flex mb-4 align-items-center">
                <p class="mb-0 fw-medium me-2 website-analytics-text-bg">268</p>
                <p class="mb-0">مستقیم</p>
                </li>
                <li class="d-flex align-items-center mb-2">
                <p class="mb-0 fw-medium me-2 website-analytics-text-bg">62</p>
                <p class="mb-0">ارجاع</p>
                </li>
                </ul>
                </div>
                <div class="col-6">
                <ul class="list-unstyled mb-0">
                <li class="d-flex mb-4 align-items-center">
                <p class="mb-0 fw-medium me-2 website-analytics-text-bg">890</p>
                <p class="mb-0">ارگانیک</p>
                </li>
                <li class="d-flex align-items-center mb-2">
                <p class="mb-0 fw-medium me-2 website-analytics-text-bg">۱٫۲ </p>
                <p class="mb-0">کمپین</p>
                </li>
                </ul>
                </div>
                </div>
                </div>
                <div class="col-lg-5 col-md-3 col-12 order-1 order-md-2 my-4 my-md-0 text-center">
                <img src="~/img/illustrations/card-website-analytics-3.png"
                alt="تجزیه و تحلیل وب سایت"
                width="170"
                class="card-website-analytics-img" />
                </div>
                </div>
                </div> *@
            </div>
        </div>


        <div class="d-flex jsutify-content-between pt-2 mb-1 mt-3" style="justify-content: space-between; align-items: center;">

            <h4 class="mb-0" style="color: black !important;">
                <img src="/buildings.png" height="50px">
                اطلاعات آژانس
            </h4>

        </div>
        <div class="card p-4 border-1 rounded-5 mt-2">

            <div class="d-flex justify-content-between">

                <h5>

                    <i class="ti ti-building ti-lg"></i>
                    @agency.Name
                </h5>

                <small class="ms-3 p-0 ">
                    آژانس تایید شده
                    <img src="/ok.png" height="13px" class="m-0 p-0">
                </small>

            </div>
            <div class="row px-2 mt-2">

                <div class="col-md-3 col-6">
                    <label>
                        <i class="ti ti-phone"></i>
                        شماره تلفن
                    </label>
                    <p class="fw-bold ms-2">
                        @agency.PhoneNumber
                    </p>
                </div>
                <div class="col-md-3 col-6">
                    <label>
                        <i class="ti ti-user"></i>
                        تلفن مدیر
                    </label>
                    <p class="fw-bold ms-2">
                        @agency.AdminMobile
                    </p>
                </div>

                <div class="col-md-3 col-6">
                    <label>
                        <i class="ti ti-percentage"></i>
                        کمیسیون پایه‌
                    </label>
                    <p class="fw-bold ms-2">
                        @agency.Commission
                        درصد
                    </p>
                </div>

                <div class="col-12">
                    <label>
                        <i class="ti ti-map-pin"></i>
                        آدرس
                    </label>
                    <p class="fw-bold ms-2">
                        @agency.Address
                    </p>
                </div>

                <div class="col-12 px-0">

                    <div class="card shadow rounded-5 px-3 py-2 d-flex justify-content-between">


                        <p class="fs-5 text-black mb-0 fw-bold">
                            موجودی اعتبار
                        </p>
                        <div class="d-flex justify-content-start">

                            <img src="/money.png" class="align-self-center" style="height: 45px; " />

                            <div class="my-0 ms-3">
                                <div class="d-flex align-items-center justify-content-around">

                                    <p class="fs-6 fw-bold mb-0 d-inlie">
                                        @agancy_balance.ToString("N0")
                                    </p>
                                    <h3 class="m-0 p-0 d-inline ms-1">
                                        <svg class="toman">
                                            <use xlink:href="#toman">
                                                <symbol id="toman" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg">
                                                    <path clip-rule="evenodd" d="M3.057 1.742L3.821 1l.78.75-.776.741-.768-.749zm3.23 2.48c0 .622-.16 1.111-.478 1.467-.201.221-.462.39-.783.505a3.251 3.251 0 01-1.083.163h-.555c-.421 0-.801-.074-1.139-.223a2.045 2.045 0 01-.9-.738A2.238 2.238 0 011 4.148c0-.059.001-.117.004-.176.03-.55.204-1.158.525-1.827l1.095.484c-.257.532-.397 1-.419 1.403-.002.04-.004.08-.004.12 0 .252.055.458.166.618a.887.887 0 00.5.354c.085.028.178.048.278.06.079.01.16.014.243.014h.555c.458 0 .769-.081.933-.244.14-.139.21-.383.21-.731V2.02h1.2v2.202zm5.433 3.184l-.72-.7.709-.706.735.707-.724.7zm-2.856.308c.542 0 .973.19 1.293.569.297.346.445.777.445 1.293v.364h.18v-.004h.41c.221 0 .377-.028.467-.084.093-.055.14-.14.14-.258v-.069c.004-.243.017-1.044 0-1.115L13 8.05v1.574a1.4 1.4 0 01-.287.863c-.306.405-.804.607-1.495.607h-.627c-.061.733-.434 1.257-1.117 1.573-.267.122-.58.21-.937.265a5.845 5.845 0 01-.914.067v-1.159c.612 0 1.072-.082 1.38-.247.25-.132.376-.298.376-.499h-.515c-.436 0-.807-.113-1.113-.339-.367-.273-.55-.667-.55-1.18 0-.488.122-.901.367-1.24.296-.415.728-.622 1.296-.622zm.533 2.226v-.364c0-.217-.048-.389-.143-.516a.464.464 0 00-.39-.187.478.478 0 00-.396.187.705.705 0 00-.136.449.65.65 0 00.003.067c.008.125.066.22.177.283.093.054.21.08.352.08h.533zM9.5 6.707l.72.7.724-.7L10.209 6l-.709.707zm-6.694 4.888h.03c.433-.01.745-.106.937-.29.024.012.065.035.12.068l.074.039.081.042c.135.073.261.133.379.18.345.146.67.22.977.22a1.216 1.216 0 00.87-.34c.3-.285.449-.714.449-1.286a2.19 2.19 0 00-.335-1.145c-.299-.457-.732-.685-1.3-.685-.502 0-.916.192-1.242.575-.113.132-.21.284-.294.456-.032.062-.06.125-.084.191a.504.504 0 00-.03.078 1.67 1.67 0 00-.022.06c-.103.309-.171.485-.205.53-.072.09-.214.14-.427.147-.123-.005-.209-.03-.256-.076-.057-.054-.085-.153-.085-.297V7l-1.201-.5v3.562c0 .261.048.496.143.703.071.158.168.296.29.413.123.118.266.211.43.28.198.084.42.13.665.136v.001h.036zm2.752-1.014a.778.778 0 00.044-.353.868.868 0 00-.165-.47c-.1-.134-.217-.201-.35-.201-.18 0-.33.103-.447.31-.042.071-.08.158-.114.262a2.434 2.434 0 00-.04.12l-.015.053-.015.046c.142.118.323.216.544.293.18.062.325.092.433.092.044 0 .086-.05.125-.152z" fill-rule="evenodd"></path>
                                                </symbol>
                                            </use>
                                        </svg>
                                    </h3>
                                </div>
                                <button class="btn btn-primary" data-bs-target="#referAndEarn" data-bs-toggle="modal" type="button">افزایش موجودی</button>
                            </div>

                        </div>

                    </div>



                </div>

            </div>

        </div>

    </div>
    <div class="col-lg-6 mb-4">
        <div class="card h-100 rounded-5">
            <div class="card-header pb-0 d-flex justify-content-between mb-lg-n4">
                <div class="card-title mb-0">
                    <h5 class="mb-0">گزارش عملکرد 7 روز گذشته</h5>
                    <small class="text-muted">سود 7 روز گذشته</small>
                </div>
                <div class="dropdown">
                    <button class="btn p-0"
                            type="button"
                            id="earningReportsId"
                            data-bs-toggle="dropdown"
                            aria-haspopup="true"
                            aria-expanded="false">
                        <i class="ti ti-dots-vertical ti-sm text-muted"></i>
                    </button>
                    <div class="dropdown-menu dropdown-menu-end" aria-labelledby="earningReportsId">
                        <a class="dropdown-item" href="javascript:void(0);">موارد بیشتر</a> <a class="dropdown-item" href="javascript:void(0);">حذف</a>
                    </div>
                </div>
                <!-- </div> -->
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-12 col-md-4 d-flex flex-column align-self-end">
                        <div class="d-flex gap-2 align-items-center mb-2 pb-1 flex-wrap">
                            <h1 class="mb-0">
                                <bdi>
                                    <svg class="toman" width="1rem" height="1rem">
                                        <use xlink:href="#toman">
                                            <symbol id="toman" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg">
                                                <path clip-rule="evenodd" d="M3.057 1.742L3.821 1l.78.75-.776.741-.768-.749zm3.23 2.48c0 .622-.16 1.111-.478 1.467-.201.221-.462.39-.783.505a3.251 3.251 0 01-1.083.163h-.555c-.421 0-.801-.074-1.139-.223a2.045 2.045 0 01-.9-.738A2.238 2.238 0 011 4.148c0-.059.001-.117.004-.176.03-.55.204-1.158.525-1.827l1.095.484c-.257.532-.397 1-.419 1.403-.002.04-.004.08-.004.12 0 .252.055.458.166.618a.887.887 0 00.5.354c.085.028.178.048.278.06.079.01.16.014.243.014h.555c.458 0 .769-.081.933-.244.14-.139.21-.383.21-.731V2.02h1.2v2.202zm5.433 3.184l-.72-.7.709-.706.735.707-.724.7zm-2.856.308c.542 0 .973.19 1.293.569.297.346.445.777.445 1.293v.364h.18v-.004h.41c.221 0 .377-.028.467-.084.093-.055.14-.14.14-.258v-.069c.004-.243.017-1.044 0-1.115L13 8.05v1.574a1.4 1.4 0 01-.287.863c-.306.405-.804.607-1.495.607h-.627c-.061.733-.434 1.257-1.117 1.573-.267.122-.58.21-.937.265a5.845 5.845 0 01-.914.067v-1.159c.612 0 1.072-.082 1.38-.247.25-.132.376-.298.376-.499h-.515c-.436 0-.807-.113-1.113-.339-.367-.273-.55-.667-.55-1.18 0-.488.122-.901.367-1.24.296-.415.728-.622 1.296-.622zm.533 2.226v-.364c0-.217-.048-.389-.143-.516a.464.464 0 00-.39-.187.478.478 0 00-.396.187.705.705 0 00-.136.449.65.65 0 00.003.067c.008.125.066.22.177.283.093.054.21.08.352.08h.533zM9.5 6.707l.72.7.724-.7L10.209 6l-.709.707zm-6.694 4.888h.03c.433-.01.745-.106.937-.29.024.012.065.035.12.068l.074.039.081.042c.135.073.261.133.379.18.345.146.67.22.977.22a1.216 1.216 0 00.87-.34c.3-.285.449-.714.449-1.286a2.19 2.19 0 00-.335-1.145c-.299-.457-.732-.685-1.3-.685-.502 0-.916.192-1.242.575-.113.132-.21.284-.294.456-.032.062-.06.125-.084.191a.504.504 0 00-.03.078 1.67 1.67 0 00-.022.06c-.103.309-.171.485-.205.53-.072.09-.214.14-.427.147-.123-.005-.209-.03-.256-.076-.057-.054-.085-.153-.085-.297V7l-1.201-.5v3.562c0 .261.048.496.143.703.071.158.168.296.29.413.123.118.266.211.43.28.198.084.42.13.665.136v.001h.036zm2.752-1.014a.778.778 0 00.044-.353.868.868 0 00-.165-.47c-.1-.134-.217-.201-.35-.201-.18 0-.33.103-.447.31-.042.071-.08.158-.114.262a2.434 2.434 0 00-.04.12l-.015.053-.015.046c.142.118.323.216.544.293.18.062.325.092.433.092.044 0 .086-.05.125-.152z" fill-rule="evenodd"></path>
                                            </symbol>
                                        </use>
                                    </svg>@ViewBag.Last7weekprofit.ToString("N0")
                                </bdi>
                            </h1>
                            <div class="badge rounded bg-label-success"><bdi>سود از فروش</bdi></div>
                        </div>
                        <small>
                            سود خالص هفت روز گذشته با محاسبه‌ی کمیسیون
                            <strong>

                                @ViewBag.agency.Commission
                                درصد
                            </strong>
                        </small>
                    </div>
                    <div class="col-12 col-md-8">
                        <div id="weeklyEarningReports"></div>
                    </div>
                </div>
                <div class="border rounded p-3 mt-4">
                    <div class="row gap-4 gap-sm-0">
                        <div class="col-12 col-sm-4">
                            <div class="d-flex gap-2 align-items-center">
                                <div class="badge rounded bg-label-primary p-1">
                                    <i class="ti ti-currency-dollar ti-sm"></i>
                                </div>
                                <h6 class="mb-0">
                                    کل فروش

                                    <strong>
                                        @DateTime.Now.ToPersianDate().MonthName
                                    </strong>
                                    ماه
                                </h6>
                            </div>
                            <h4 class="my-2 pt-1">
                                <bdi>
                                    <svg class="toman" width="1rem" height="1rem">
                                        <use xlink:href="#toman">
                                            <symbol id="toman" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg">
                                                <path clip-rule="evenodd" d="M3.057 1.742L3.821 1l.78.75-.776.741-.768-.749zm3.23 2.48c0 .622-.16 1.111-.478 1.467-.201.221-.462.39-.783.505a3.251 3.251 0 01-1.083.163h-.555c-.421 0-.801-.074-1.139-.223a2.045 2.045 0 01-.9-.738A2.238 2.238 0 011 4.148c0-.059.001-.117.004-.176.03-.55.204-1.158.525-1.827l1.095.484c-.257.532-.397 1-.419 1.403-.002.04-.004.08-.004.12 0 .252.055.458.166.618a.887.887 0 00.5.354c.085.028.178.048.278.06.079.01.16.014.243.014h.555c.458 0 .769-.081.933-.244.14-.139.21-.383.21-.731V2.02h1.2v2.202zm5.433 3.184l-.72-.7.709-.706.735.707-.724.7zm-2.856.308c.542 0 .973.19 1.293.569.297.346.445.777.445 1.293v.364h.18v-.004h.41c.221 0 .377-.028.467-.084.093-.055.14-.14.14-.258v-.069c.004-.243.017-1.044 0-1.115L13 8.05v1.574a1.4 1.4 0 01-.287.863c-.306.405-.804.607-1.495.607h-.627c-.061.733-.434 1.257-1.117 1.573-.267.122-.58.21-.937.265a5.845 5.845 0 01-.914.067v-1.159c.612 0 1.072-.082 1.38-.247.25-.132.376-.298.376-.499h-.515c-.436 0-.807-.113-1.113-.339-.367-.273-.55-.667-.55-1.18 0-.488.122-.901.367-1.24.296-.415.728-.622 1.296-.622zm.533 2.226v-.364c0-.217-.048-.389-.143-.516a.464.464 0 00-.39-.187.478.478 0 00-.396.187.705.705 0 00-.136.449.65.65 0 00.003.067c.008.125.066.22.177.283.093.054.21.08.352.08h.533zM9.5 6.707l.72.7.724-.7L10.209 6l-.709.707zm-6.694 4.888h.03c.433-.01.745-.106.937-.29.024.012.065.035.12.068l.074.039.081.042c.135.073.261.133.379.18.345.146.67.22.977.22a1.216 1.216 0 00.87-.34c.3-.285.449-.714.449-1.286a2.19 2.19 0 00-.335-1.145c-.299-.457-.732-.685-1.3-.685-.502 0-.916.192-1.242.575-.113.132-.21.284-.294.456-.032.062-.06.125-.084.191a.504.504 0 00-.03.078 1.67 1.67 0 00-.022.06c-.103.309-.171.485-.205.53-.072.09-.214.14-.427.147-.123-.005-.209-.03-.256-.076-.057-.054-.085-.153-.085-.297V7l-1.201-.5v3.562c0 .261.048.496.143.703.071.158.168.296.29.413.123.118.266.211.43.28.198.084.42.13.665.136v.001h.036zm2.752-1.014a.778.778 0 00.044-.353.868.868 0 00-.165-.47c-.1-.134-.217-.201-.35-.201-.18 0-.33.103-.447.31-.042.071-.08.158-.114.262a2.434 2.434 0 00-.04.12l-.015.053-.015.046c.142.118.323.216.544.293.18.062.325.092.433.092.044 0 .086-.05.125-.152z" fill-rule="evenodd"></path>
                                            </symbol>
                                        </use>
                                    </svg>@ViewBag.thismonthtotalprice.ToString("N0")
                                </bdi>
                            </h4>
                            <div class="progress w-75" style="height: 4px">
                                <div class="progress-bar"
                                     role="progressbar"
                                     style="width: 65%"
                                     aria-valuenow="65"
                                     aria-valuemin="0"
                                     aria-valuemax="100"></div>
                            </div>
                        </div>
                        <div class="col-12 col-sm-4">
                            <div class="d-flex gap-2 align-items-center">
                                <div class="badge rounded bg-label-info p-1"><i class="ti ti-chart-pie-2 ti-sm"></i></div>
                                <h6 class="mb-0">
                                    سود
                                    @DateTime.Now.ToPersianDate().MonthName
                                    ماه
                                </h6>
                            </div>
                            <h4 class="my-2 pt-1">
                                <bdi>
                                    <svg class="toman" width="1rem" height="1rem">
                                        <use xlink:href="#toman">
                                            <symbol id="toman" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg">
                                                <path clip-rule="evenodd" d="M3.057 1.742L3.821 1l.78.75-.776.741-.768-.749zm3.23 2.48c0 .622-.16 1.111-.478 1.467-.201.221-.462.39-.783.505a3.251 3.251 0 01-1.083.163h-.555c-.421 0-.801-.074-1.139-.223a2.045 2.045 0 01-.9-.738A2.238 2.238 0 011 4.148c0-.059.001-.117.004-.176.03-.55.204-1.158.525-1.827l1.095.484c-.257.532-.397 1-.419 1.403-.002.04-.004.08-.004.12 0 .252.055.458.166.618a.887.887 0 00.5.354c.085.028.178.048.278.06.079.01.16.014.243.014h.555c.458 0 .769-.081.933-.244.14-.139.21-.383.21-.731V2.02h1.2v2.202zm5.433 3.184l-.72-.7.709-.706.735.707-.724.7zm-2.856.308c.542 0 .973.19 1.293.569.297.346.445.777.445 1.293v.364h.18v-.004h.41c.221 0 .377-.028.467-.084.093-.055.14-.14.14-.258v-.069c.004-.243.017-1.044 0-1.115L13 8.05v1.574a1.4 1.4 0 01-.287.863c-.306.405-.804.607-1.495.607h-.627c-.061.733-.434 1.257-1.117 1.573-.267.122-.58.21-.937.265a5.845 5.845 0 01-.914.067v-1.159c.612 0 1.072-.082 1.38-.247.25-.132.376-.298.376-.499h-.515c-.436 0-.807-.113-1.113-.339-.367-.273-.55-.667-.55-1.18 0-.488.122-.901.367-1.24.296-.415.728-.622 1.296-.622zm.533 2.226v-.364c0-.217-.048-.389-.143-.516a.464.464 0 00-.39-.187.478.478 0 00-.396.187.705.705 0 00-.136.449.65.65 0 00.003.067c.008.125.066.22.177.283.093.054.21.08.352.08h.533zM9.5 6.707l.72.7.724-.7L10.209 6l-.709.707zm-6.694 4.888h.03c.433-.01.745-.106.937-.29.024.012.065.035.12.068l.074.039.081.042c.135.073.261.133.379.18.345.146.67.22.977.22a1.216 1.216 0 00.87-.34c.3-.285.449-.714.449-1.286a2.19 2.19 0 00-.335-1.145c-.299-.457-.732-.685-1.3-.685-.502 0-.916.192-1.242.575-.113.132-.21.284-.294.456-.032.062-.06.125-.084.191a.504.504 0 00-.03.078 1.67 1.67 0 00-.022.06c-.103.309-.171.485-.205.53-.072.09-.214.14-.427.147-.123-.005-.209-.03-.256-.076-.057-.054-.085-.153-.085-.297V7l-1.201-.5v3.562c0 .261.048.496.143.703.071.158.168.296.29.413.123.118.266.211.43.28.198.084.42.13.665.136v.001h.036zm2.752-1.014a.778.778 0 00.044-.353.868.868 0 00-.165-.47c-.1-.134-.217-.201-.35-.201-.18 0-.33.103-.447.31-.042.071-.08.158-.114.262a2.434 2.434 0 00-.04.12l-.015.053-.015.046c.142.118.323.216.544.293.18.062.325.092.433.092.044 0 .086-.05.125-.152z" fill-rule="evenodd"></path>
                                            </symbol>
                                        </use>
                                    </svg>@ViewBag.thismonthtotalprofit.ToString("N0")
                                </bdi>
                            </h4>
                            <div class="progress w-75" style="height: 4px">
                                <div class="progress-bar bg-info"
                                     role="progressbar"
                                     style="width: 50%"
                                     aria-valuenow="50"
                                     aria-valuemin="0"
                                     aria-valuemax="100"></div>
                            </div>
                        </div>
                        <div class="col-12 col-sm-4">
                            <div class="d-flex gap-2 align-items-center">
                                <div class="badge rounded bg-label-warning p-1">
                                    <i class="ti ti-history ti-sm"></i>
                                </div>
                                <h6 class="mb-0">سود فروش امروز</h6>
                            </div>
                            <h4 class="my-2 pt-1">
                                <bdi>
                                    <svg class="toman" width="1rem" height="1rem">
                                        <use xlink:href="#toman">
                                            <symbol id="toman" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg">
                                                <path clip-rule="evenodd" d="M3.057 1.742L3.821 1l.78.75-.776.741-.768-.749zm3.23 2.48c0 .622-.16 1.111-.478 1.467-.201.221-.462.39-.783.505a3.251 3.251 0 01-1.083.163h-.555c-.421 0-.801-.074-1.139-.223a2.045 2.045 0 01-.9-.738A2.238 2.238 0 011 4.148c0-.059.001-.117.004-.176.03-.55.204-1.158.525-1.827l1.095.484c-.257.532-.397 1-.419 1.403-.002.04-.004.08-.004.12 0 .252.055.458.166.618a.887.887 0 00.5.354c.085.028.178.048.278.06.079.01.16.014.243.014h.555c.458 0 .769-.081.933-.244.14-.139.21-.383.21-.731V2.02h1.2v2.202zm5.433 3.184l-.72-.7.709-.706.735.707-.724.7zm-2.856.308c.542 0 .973.19 1.293.569.297.346.445.777.445 1.293v.364h.18v-.004h.41c.221 0 .377-.028.467-.084.093-.055.14-.14.14-.258v-.069c.004-.243.017-1.044 0-1.115L13 8.05v1.574a1.4 1.4 0 01-.287.863c-.306.405-.804.607-1.495.607h-.627c-.061.733-.434 1.257-1.117 1.573-.267.122-.58.21-.937.265a5.845 5.845 0 01-.914.067v-1.159c.612 0 1.072-.082 1.38-.247.25-.132.376-.298.376-.499h-.515c-.436 0-.807-.113-1.113-.339-.367-.273-.55-.667-.55-1.18 0-.488.122-.901.367-1.24.296-.415.728-.622 1.296-.622zm.533 2.226v-.364c0-.217-.048-.389-.143-.516a.464.464 0 00-.39-.187.478.478 0 00-.396.187.705.705 0 00-.136.449.65.65 0 00.003.067c.008.125.066.22.177.283.093.054.21.08.352.08h.533zM9.5 6.707l.72.7.724-.7L10.209 6l-.709.707zm-6.694 4.888h.03c.433-.01.745-.106.937-.29.024.012.065.035.12.068l.074.039.081.042c.135.073.261.133.379.18.345.146.67.22.977.22a1.216 1.216 0 00.87-.34c.3-.285.449-.714.449-1.286a2.19 2.19 0 00-.335-1.145c-.299-.457-.732-.685-1.3-.685-.502 0-.916.192-1.242.575-.113.132-.21.284-.294.456-.032.062-.06.125-.084.191a.504.504 0 00-.03.078 1.67 1.67 0 00-.022.06c-.103.309-.171.485-.205.53-.072.09-.214.14-.427.147-.123-.005-.209-.03-.256-.076-.057-.054-.085-.153-.085-.297V7l-1.201-.5v3.562c0 .261.048.496.143.703.071.158.168.296.29.413.123.118.266.211.43.28.198.084.42.13.665.136v.001h.036zm2.752-1.014a.778.778 0 00.044-.353.868.868 0 00-.165-.47c-.1-.134-.217-.201-.35-.201-.18 0-.33.103-.447.31-.042.071-.08.158-.114.262a2.434 2.434 0 00-.04.12l-.015.053-.015.046c.142.118.323.216.544.293.18.062.325.092.433.092.044 0 .086-.05.125-.152z" fill-rule="evenodd"></path>
                                            </symbol>
                                        </use>
                                    </svg>@ViewBag.todaytotalprofit.ToString("N0")
                                </bdi>
                            </h4>
                            <div class="progress w-75" style="height: 4px">
                                <div class="progress-bar bg-warning"
                                     role="progressbar"
                                     style="width: 65%"
                                     aria-valuenow="65"
                                     aria-valuemin="0"
                                     aria-valuemax="100">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<div class="modal fade" id="referAndEarn" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-simple modal-refer-and-earn">
        <div class="modal-content p-3 p-md-5">
            <div class="modal-body">
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                <div class="text-center mb-4">
                    <h3 class="mb-2">
                        <i class="ti ti-copy-plus ti-lg"></i>
                          افزایش موجودی
                        <i class="ti ti-cash ti-lg"></i>
                    </h3>
                    <p class="text-muted text-center mb-5 w-7   5 m-auto">با استفاده از این فرم می‌توانید درخواست افزایش موجودی را ثبت کنید</p>
                </div>
                <div class="row">
                    <div class="col-12 col-lg-4 px-4">
                        <div class="d-flex justify-content-center mb-4">
                            <div class="modal-refer-and-earn-step bg-label-primary">
                                <svg xmlns="http://www.w3.org/2000/svg" width="43" height="31" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-clipboard-text"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2" /><path d="M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z" /><path d="M9 12h6" /><path d="M9 16h6" /></svg>
                            </div>
                        </div>
                        <div class="text-center">
                            <h5>پر کردن فرم</h5>
                            <p class="mb-lg-0">اطلاعات زیر را وارد کنید</p>
                        </div>
                    </div>
                    <div class="col-12 col-lg-4 px-4">
                        <div class="d-flex justify-content-center mb-4">
                            <div class="modal-refer-and-earn-step bg-label-primary">
                                <svg xmlns="http://www.w3.org/2000/svg" width="43" height="31" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-phone-ringing"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M20 4l-2 2" /><path d="M22 10.5l-2.5 -.5" /><path d="M13.5 2l.5 2.5" /><path d="M5 4h4l2 5l-2.5 1.5a11 11 0 0 0 5 5l1.5 -2.5l5 2v4a2 2 0 0 1 -2 2c-8.072 -.49 -14.51 -6.928 -15 -15a2 2 0 0 1 2 -2" /></svg>
                            </div>
                        </div>
                        <div class="text-center">
                            <h5>تماس اپراتور</h5>
                            <p class="mb-lg-0">اپراتور مسترشوفر برای دریافت اطلاعات پرداخت در اسرع وقت با شما تماس می‌گیرد</p>
                        </div>
                    </div>
                    <div class="col-12 col-lg-4 px-4">
                        <div class="d-flex justify-content-center mb-4">
                            <div class="modal-refer-and-earn-step bg-label-primary">
                                <svg xmlns="http://www.w3.org/2000/svg" width="43" height="31" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-rosette-discount-check"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M5 7.2a2.2 2.2 0 0 1 2.2 -2.2h1a2.2 2.2 0 0 0 1.55 -.64l.7 -.7a2.2 2.2 0 0 1 3.12 0l.7 .7c.412 .41 .97 .64 1.55 .64h1a2.2 2.2 0 0 1 2.2 2.2v1c0 .58 .23 1.138 .64 1.55l.7 .7a2.2 2.2 0 0 1 0 3.12l-.7 .7a2.2 2.2 0 0 0 -.64 1.55v1a2.2 2.2 0 0 1 -2.2 2.2h-1a2.2 2.2 0 0 0 -1.55 .64l-.7 .7a2.2 2.2 0 0 1 -3.12 0l-.7 -.7a2.2 2.2 0 0 0 -1.55 -.64h-1a2.2 2.2 0 0 1 -2.2 -2.2v-1a2.2 2.2 0 0 0 -.64 -1.55l-.7 -.7a2.2 2.2 0 0 1 0 -3.12l.7 -.7a2.2 2.2 0 0 0 .64 -1.55v-1" /><path d="M9 12l2 2l4 -4" /></svg>
                            </div>
                        </div>
                        <div class="text-center">
                            <h5>انجام عملیات</h5>
                            <p class="mb-0">حساب آژانس در سریع ترین زمان، شارژ خواهد شد.</p>
                        </div>
                    </div>
                </div>
                <hr class="my-5" />
                <div class="col-xxl">
                        <h5 class="mb-3">درخواست افزایش موجودی</h5>
                    <div class="card-header d-flex align-items-center justify-content-between">
                    </div>
                    <div class="card-body">
                        <form id="paymentrequestform">
                            <div class="row mb-3">
                                <label class="col-sm-2 col-form-label" for="basic-default-name">
                                  مقدار شارژ
                                    <span class="text-danger">
                                        *
                                    </span>
                                  <span class="text-small ms-1 fw-lighter">تومان</span>
                                </label>
                                <div class="col-sm-10">
                                    <input required class="form-control" id="amount" name="amount" placeholder="10,000,000 تومان " type="text" />
                                    <span class="invalid-feedback" id="amount-error"></span>
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label class="col-sm-2 col-form-label" for="basic-default-company">نوع پرداخت
                                  <span class="text-danger">
                                    *
                                  </span>
                                </label>
                                <div class="col-sm-10">
                                    <select class="select2 form-select" id="paymentmethod" name="method">
                                            <option selected value="کارت به کارت">کارت به کارت</option>
                                            <option  value="واریز به حساب">واریز به حساب</option>
                                            <option value="اعتباری">اعتباری</option>
                                            <option value="سایر">سایر</option>
                                        </select>
                                </div>
                            </div>
                         
                            <div class="row mb-3">
                                <label class="col-sm-2 col-form-label" for="basic-default-message">توضیحات</label>
                                <div class="col-sm-10">
                                    <textarea name="message" aria-describedby="basic-icon-default-message2" aria-label="پیام خود را وارد کنید" class="form-control" id="basic-default-message" placeholder="(اختیاری) پیام خود را وارد کنید"></textarea>
                                </div>
                            </div>
                            <div class="row justify-content-end">
                                <div class="col-sm-10">
                                    <button class="btn btn-primary" type="submit">ثبت درخواست</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
        document.addEventListener('DOMContentLoaded', function () {
        var amountInput = document.getElementById('amount');

            amountInput.addEventListener('input', function (e) {
                var value = e.target.value;
                value = value.replace(/,/g, ''); // Remove existing commas
                value = value.replace(/\B(?=(\d{3})+(?!\d))/g, ','); // Add commas every 3 digits
                e.target.value = value;
            });
        });


    $(document).ready(function () {
        // Initialize form validation
        FormValidation.formValidation(
            document.getElementById('paymentRequestForm'),
            {
                fields: {
                    amount: {
                        validators: {
                            notEmpty: {
                                message: 'The amount is required'
                            },
                            numeric: {
                                message: 'The amount must be a number'
                            }
                        }
                    },
                    method: {
                        validators: {
                            notEmpty: {
                                message: 'The payment method is required'
                            }
                        }
                    },
                    message: {
                        validators: {
                            notEmpty: {
                                message: 'The message is required'
                            }
                        }
                    }
                },
                plugins: {
                    trigger: new FormValidation.plugins.Trigger(),
                    bootstrap5: new FormValidation.plugins.Bootstrap5({
                        rowSelector: '.form-group'
                    }),
                    autoFocus: new FormValidation.plugins.AutoFocus(),
                    submitButton: new FormValidation.plugins.SubmitButton(),
                    defaultSubmit: new FormValidation.plugins.DefaultSubmit(),
                }
            }
        );

    });




    </script>


 <script>
   
    $(document).ready(function () {
        $('#paymentrequestform').on('submit', function (e) {
            e.preventDefault();

            var formData = $(this).serialize();

            $.ajax({
                type: 'POST',
                url: '/Payments/ChargeRequest',
                data: formData,
                success: function (response) {

                    Swal.fire({
                        title: 'درخواست شما با موفقیت ثبت شد',
                        text: 'همکاران ما در اسرع وقت به منظور تایید شارژ، با شما تماس خواهند گرفت. ',
                        confirmButtonText: 'متوجه شدم',
                        icon: 'success',
                        customClass: {
                            confirmButton: 'btn btn-primary waves-effect waves-light'
                        },
                        buttonsStyling: false
                    });
                    // Optionally, clear the form fields
                    $('#paymentrequestform')[0].reset();
                    $('#referAndEarn').modal('hide');
                },
                error: function (xhr, status, error) {

                     $('#referAndEarn').modal('hide');
                    Swal.fire({
                        icon: "error",
                        title: "مشکلی پیش آمده",
                        confirmButtonText: 'متوجه شدم',
                        text: "متاسفانه در ثبت پیام شما مشکلی پیش آمد می‌توانید با شماره 09902063015 تماس حاصل فرمایید.",
                        customClass: {
                            confirmButton: 'btn btn-primary waves-effect waves-light'
                        },
                        buttonsStyling: false
                    });
                }
            });
        });
    });
 </script>
